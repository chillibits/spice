Token(type=100, text="#!", line=1, col: 1)
Token(type=56, text="[", line=1, col: 3)
Token(type=107, text="core", line=1, col: 4)
Token(type=95, text=".", line=1, col: 8)
Token(type=107, text="compiler", line=1, col: 9)
Token(type=95, text=".", line=1, col: 17)
Token(type=107, text="alwaysKeepOnNameCollision", line=1, col: 18)
Token(type=90, text="=", line=1, col: 44)
Token(type=50, text="true", line=1, col: 46)
Token(type=57, text="]", line=1, col: 50)
Token(type=29, text="import", line=3, col: 1)
Token(type=106, text="std/type/result", line=3, col: 8)
Token(type=92, text=";", line=3, col: 25)
Token(type=111, text="// Link external functions", line=5, col: 1)
Token(type=49, text="ext", line=6, col: 1)
Token(type=17, text="f", line=6, col: 5)
Token(type=83, text="<", line=6, col: 6)
Token(type=15, text="heap", line=6, col: 7)
Token(type=5, text="byte", line=6, col: 12)
Token(type=77, text="*", line=6, col: 16)
Token(type=82, text=">", line=6, col: 17)
Token(type=107, text="malloc", line=6, col: 19)
Token(type=54, text="(", line=6, col: 25)
Token(type=12, text="unsigned", line=6, col: 26)
Token(type=4, text="long", line=6, col: 35)
Token(type=55, text=")", line=6, col: 39)
Token(type=92, text=";", line=6, col: 40)
Token(type=49, text="ext", line=7, col: 1)
Token(type=17, text="f", line=7, col: 5)
Token(type=83, text="<", line=7, col: 6)
Token(type=15, text="heap", line=7, col: 7)
Token(type=5, text="byte", line=7, col: 12)
Token(type=77, text="*", line=7, col: 16)
Token(type=82, text=">", line=7, col: 17)
Token(type=107, text="realloc", line=7, col: 19)
Token(type=54, text="(", line=7, col: 26)
Token(type=15, text="heap", line=7, col: 27)
Token(type=5, text="byte", line=7, col: 32)
Token(type=77, text="*", line=7, col: 36)
Token(type=94, text=",", line=7, col: 37)
Token(type=12, text="unsigned", line=7, col: 39)
Token(type=4, text="long", line=7, col: 48)
Token(type=55, text=")", line=7, col: 52)
Token(type=92, text=";", line=7, col: 53)
Token(type=49, text="ext", line=8, col: 1)
Token(type=18, text="p", line=8, col: 5)
Token(type=107, text="free", line=8, col: 7)
Token(type=54, text="(", line=8, col: 11)
Token(type=15, text="heap", line=8, col: 12)
Token(type=5, text="byte", line=8, col: 17)
Token(type=77, text="*", line=8, col: 21)
Token(type=55, text=")", line=8, col: 22)
Token(type=92, text=";", line=8, col: 23)
Token(type=49, text="ext", line=9, col: 1)
Token(type=18, text="p", line=9, col: 5)
Token(type=107, text="memcpy", line=9, col: 7)
Token(type=54, text="(", line=9, col: 13)
Token(type=15, text="heap", line=9, col: 14)
Token(type=5, text="byte", line=9, col: 19)
Token(type=77, text="*", line=9, col: 23)
Token(type=94, text=",", line=9, col: 24)
Token(type=15, text="heap", line=9, col: 26)
Token(type=5, text="byte", line=9, col: 31)
Token(type=77, text="*", line=9, col: 35)
Token(type=94, text=",", line=9, col: 36)
Token(type=12, text="unsigned", line=9, col: 38)
Token(type=4, text="long", line=9, col: 47)
Token(type=55, text=")", line=9, col: 51)
Token(type=92, text=";", line=9, col: 52)
Token(type=109, text="/**
  * Allocates a new block of memory of the given size.
  *
  * @param size The size of the block to allocate.
  * @return A pointer to the allocated block, or an error if the allocation failed.
  */", line=11, col: 1)
Token(type=14, text="public", line=17, col: 1)
Token(type=17, text="f", line=17, col: 8)
Token(type=83, text="<", line=17, col: 9)
Token(type=108, text="Result", line=17, col: 10)
Token(type=83, text="<", line=17, col: 16)
Token(type=15, text="heap", line=17, col: 17)
Token(type=5, text="byte", line=17, col: 22)
Token(type=77, text="*", line=17, col: 26)
Token(type=87, text=">>", line=17, col: 27)
Token(type=107, text="sAlloc", line=17, col: 30)
Token(type=54, text="(", line=17, col: 36)
Token(type=12, text="unsigned", line=17, col: 37)
Token(type=4, text="long", line=17, col: 46)
Token(type=107, text="size", line=17, col: 51)
Token(type=55, text=")", line=17, col: 55)
Token(type=52, text="{", line=17, col: 57)
Token(type=15, text="heap", line=18, col: 5)
Token(type=5, text="byte", line=18, col: 10)
Token(type=77, text="*", line=18, col: 14)
Token(type=107, text="ptr", line=18, col: 16)
Token(type=90, text="=", line=18, col: 20)
Token(type=107, text="malloc", line=18, col: 22)
Token(type=54, text="(", line=18, col: 28)
Token(type=107, text="size", line=18, col: 29)
Token(type=55, text=")", line=18, col: 33)
Token(type=92, text=";", line=18, col: 34)
Token(type=33, text="return", line=19, col: 5)
Token(type=107, text="ptr", line=19, col: 12)
Token(type=89, text="!=", line=19, col: 16)
Token(type=42, text="nil", line=19, col: 19)
Token(type=83, text="<", line=19, col: 22)
Token(type=15, text="heap", line=19, col: 23)
Token(type=5, text="byte", line=19, col: 28)
Token(type=77, text="*", line=19, col: 32)
Token(type=82, text=">", line=19, col: 33)
Token(type=91, text="?", line=19, col: 35)
Token(type=107, text="ok", line=19, col: 37)
Token(type=54, text="(", line=19, col: 39)
Token(type=107, text="ptr", line=19, col: 40)
Token(type=55, text=")", line=19, col: 43)
Token(type=93, text=":", line=19, col: 45)
Token(type=107, text="err", line=19, col: 47)
Token(type=54, text="(", line=19, col: 50)
Token(type=42, text="nil", line=19, col: 51)
Token(type=83, text="<", line=19, col: 54)
Token(type=15, text="heap", line=19, col: 55)
Token(type=5, text="byte", line=19, col: 60)
Token(type=77, text="*", line=19, col: 64)
Token(type=82, text=">", line=19, col: 65)
Token(type=94, text=",", line=19, col: 66)
Token(type=106, text="Out of memory occurred!", line=19, col: 68)
Token(type=55, text=")", line=19, col: 93)
Token(type=92, text=";", line=19, col: 94)
Token(type=53, text="}", line=20, col: 1)
Token(type=109, text="/**
  * Reallocates a block of memory to the given size.
  *
  * @param ptr The pointer to the block to reallocate.
  * @param size The new size of the block.
  * @return A pointer to the reallocated block, or an error if the reallocation failed.
  */", line=22, col: 1)
Token(type=14, text="public", line=29, col: 1)
Token(type=17, text="f", line=29, col: 8)
Token(type=83, text="<", line=29, col: 9)
Token(type=108, text="Result", line=29, col: 10)
Token(type=83, text="<", line=29, col: 16)
Token(type=15, text="heap", line=29, col: 17)
Token(type=5, text="byte", line=29, col: 22)
Token(type=77, text="*", line=29, col: 26)
Token(type=87, text=">>", line=29, col: 27)
Token(type=107, text="sRealloc", line=29, col: 30)
Token(type=54, text="(", line=29, col: 38)
Token(type=15, text="heap", line=29, col: 39)
Token(type=5, text="byte", line=29, col: 44)
Token(type=77, text="*", line=29, col: 48)
Token(type=107, text="ptr", line=29, col: 50)
Token(type=94, text=",", line=29, col: 53)
Token(type=12, text="unsigned", line=29, col: 55)
Token(type=4, text="long", line=29, col: 64)
Token(type=107, text="size", line=29, col: 69)
Token(type=55, text=")", line=29, col: 73)
Token(type=52, text="{", line=29, col: 75)
Token(type=15, text="heap", line=30, col: 5)
Token(type=5, text="byte", line=30, col: 10)
Token(type=77, text="*", line=30, col: 14)
Token(type=107, text="newPtr", line=30, col: 16)
Token(type=90, text="=", line=30, col: 23)
Token(type=107, text="realloc", line=30, col: 25)
Token(type=54, text="(", line=30, col: 32)
Token(type=107, text="ptr", line=30, col: 33)
Token(type=94, text=",", line=30, col: 36)
Token(type=107, text="size", line=30, col: 38)
Token(type=55, text=")", line=30, col: 42)
Token(type=92, text=";", line=30, col: 43)
Token(type=33, text="return", line=31, col: 5)
Token(type=107, text="newPtr", line=31, col: 12)
Token(type=89, text="!=", line=31, col: 19)
Token(type=42, text="nil", line=31, col: 22)
Token(type=83, text="<", line=31, col: 25)
Token(type=15, text="heap", line=31, col: 26)
Token(type=5, text="byte", line=31, col: 31)
Token(type=77, text="*", line=31, col: 35)
Token(type=82, text=">", line=31, col: 36)
Token(type=91, text="?", line=31, col: 38)
Token(type=107, text="ok", line=31, col: 40)
Token(type=54, text="(", line=31, col: 42)
Token(type=107, text="newPtr", line=31, col: 43)
Token(type=55, text=")", line=31, col: 49)
Token(type=93, text=":", line=31, col: 51)
Token(type=107, text="err", line=31, col: 53)
Token(type=54, text="(", line=31, col: 56)
Token(type=42, text="nil", line=31, col: 57)
Token(type=83, text="<", line=31, col: 60)
Token(type=15, text="heap", line=31, col: 61)
Token(type=5, text="byte", line=31, col: 66)
Token(type=77, text="*", line=31, col: 70)
Token(type=82, text=">", line=31, col: 71)
Token(type=94, text=",", line=31, col: 72)
Token(type=106, text="Out of memory occurred!", line=31, col: 74)
Token(type=55, text=")", line=31, col: 99)
Token(type=92, text=";", line=31, col: 100)
Token(type=53, text="}", line=32, col: 1)
Token(type=109, text="/**
  * Copies a block of memory to a new block of memory.
  *
  * @param oldPtr The pointer to the block to copy.
  * @param newPtr The pointer to the new block to copy to.
  * @param size The size of the block to copy.
  * @return A pointer to the copied block, or an error if the copy failed.
  */", line=34, col: 1)
Token(type=14, text="public", line=42, col: 1)
Token(type=17, text="f", line=42, col: 8)
Token(type=83, text="<", line=42, col: 9)
Token(type=108, text="Result", line=42, col: 10)
Token(type=83, text="<", line=42, col: 16)
Token(type=15, text="heap", line=42, col: 17)
Token(type=5, text="byte", line=42, col: 22)
Token(type=77, text="*", line=42, col: 26)
Token(type=87, text=">>", line=42, col: 27)
Token(type=107, text="sCopy", line=42, col: 30)
Token(type=54, text="(", line=42, col: 35)
Token(type=15, text="heap", line=42, col: 36)
Token(type=5, text="byte", line=42, col: 41)
Token(type=77, text="*", line=42, col: 45)
Token(type=107, text="oldPtr", line=42, col: 47)
Token(type=94, text=",", line=42, col: 53)
Token(type=15, text="heap", line=42, col: 55)
Token(type=5, text="byte", line=42, col: 60)
Token(type=77, text="*", line=42, col: 64)
Token(type=107, text="newPtr", line=42, col: 66)
Token(type=94, text=",", line=42, col: 72)
Token(type=12, text="unsigned", line=42, col: 74)
Token(type=4, text="long", line=42, col: 83)
Token(type=107, text="size", line=42, col: 88)
Token(type=55, text=")", line=42, col: 92)
Token(type=52, text="{", line=42, col: 94)
Token(type=19, text="if", line=43, col: 5)
Token(type=107, text="oldPtr", line=43, col: 8)
Token(type=88, text="==", line=43, col: 15)
Token(type=42, text="nil", line=43, col: 18)
Token(type=83, text="<", line=43, col: 21)
Token(type=15, text="heap", line=43, col: 22)
Token(type=5, text="byte", line=43, col: 27)
Token(type=77, text="*", line=43, col: 31)
Token(type=82, text=">", line=43, col: 32)
Token(type=60, text="||", line=43, col: 34)
Token(type=107, text="newPtr", line=43, col: 36)
Token(type=88, text="==", line=43, col: 43)
Token(type=42, text="nil", line=43, col: 46)
Token(type=83, text="<", line=43, col: 49)
Token(type=15, text="heap", line=43, col: 50)
Token(type=5, text="byte", line=43, col: 55)
Token(type=77, text="*", line=43, col: 59)
Token(type=82, text=">", line=43, col: 60)
Token(type=52, text="{", line=43, col: 62)
Token(type=33, text="return", line=44, col: 9)
Token(type=107, text="err", line=44, col: 16)
Token(type=54, text="(", line=44, col: 19)
Token(type=42, text="nil", line=44, col: 20)
Token(type=83, text="<", line=44, col: 23)
Token(type=15, text="heap", line=44, col: 24)
Token(type=5, text="byte", line=44, col: 29)
Token(type=77, text="*", line=44, col: 33)
Token(type=82, text=">", line=44, col: 34)
Token(type=94, text=",", line=44, col: 35)
Token(type=106, text="Cannot copy from or to nil pointer!", line=44, col: 37)
Token(type=55, text=")", line=44, col: 74)
Token(type=92, text=";", line=44, col: 75)
Token(type=53, text="}", line=45, col: 5)
Token(type=107, text="memcpy", line=46, col: 5)
Token(type=54, text="(", line=46, col: 11)
Token(type=107, text="newPtr", line=46, col: 12)
Token(type=94, text=",", line=46, col: 18)
Token(type=107, text="oldPtr", line=46, col: 20)
Token(type=94, text=",", line=46, col: 26)
Token(type=107, text="size", line=46, col: 28)
Token(type=55, text=")", line=46, col: 32)
Token(type=92, text=";", line=46, col: 33)
Token(type=33, text="return", line=47, col: 5)
Token(type=107, text="ok", line=47, col: 12)
Token(type=54, text="(", line=47, col: 14)
Token(type=107, text="newPtr", line=47, col: 15)
Token(type=55, text=")", line=47, col: 21)
Token(type=92, text=";", line=47, col: 22)
Token(type=53, text="}", line=48, col: 1)
Token(type=109, text="/**
  * Frees a block of memory.
  * The pointer is zeroed out after freeing the memory to prevent accidental double frees.
  *
  * @param ptr The pointer to the block to free.
  */", line=50, col: 1)
Token(type=14, text="public", line=56, col: 1)
Token(type=18, text="p", line=56, col: 8)
Token(type=107, text="sDealloc", line=56, col: 10)
Token(type=54, text="(", line=56, col: 18)
Token(type=15, text="heap", line=56, col: 19)
Token(type=5, text="byte", line=56, col: 24)
Token(type=77, text="*", line=56, col: 28)
Token(type=62, text="&&", line=56, col: 29)
Token(type=107, text="ptr", line=56, col: 31)
Token(type=55, text=")", line=56, col: 34)
Token(type=52, text="{", line=56, col: 36)
Token(type=19, text="if", line=57, col: 5)
Token(type=107, text="ptr", line=57, col: 8)
Token(type=88, text="==", line=57, col: 12)
Token(type=42, text="nil", line=57, col: 15)
Token(type=83, text="<", line=57, col: 18)
Token(type=15, text="heap", line=57, col: 19)
Token(type=5, text="byte", line=57, col: 24)
Token(type=77, text="*", line=57, col: 28)
Token(type=82, text=">", line=57, col: 29)
Token(type=52, text="{", line=57, col: 31)
Token(type=33, text="return", line=57, col: 33)
Token(type=92, text=";", line=57, col: 39)
Token(type=53, text="}", line=57, col: 41)
Token(type=107, text="free", line=58, col: 5)
Token(type=54, text="(", line=58, col: 9)
Token(type=107, text="ptr", line=58, col: 10)
Token(type=55, text=")", line=58, col: 13)
Token(type=92, text=";", line=58, col: 14)
Token(type=107, text="ptr", line=59, col: 5)
Token(type=90, text="=", line=59, col: 9)
Token(type=42, text="nil", line=59, col: 11)
Token(type=83, text="<", line=59, col: 14)
Token(type=15, text="heap", line=59, col: 15)
Token(type=5, text="byte", line=59, col: 20)
Token(type=77, text="*", line=59, col: 24)
Token(type=82, text=">", line=59, col: 25)
Token(type=92, text=";", line=59, col: 26)
Token(type=111, text="// Zero out to prevent accidental double frees", line=59, col: 28)
Token(type=53, text="}", line=60, col: 1)

Lexed tokens: 303
